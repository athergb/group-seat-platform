<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Seat Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
    /* ========== GLOBAL STYLES ========== */
    body { 
        background-color: #f8f9fa; 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        padding-bottom: 50px;
    }
    
    /* ========== NAVBAR ========== */
    .navbar-brand { 
        font-weight: bold; 
        color: #0d6efd !important; 
        font-size: 1.3rem;
    }
    .navbar {
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        padding: 0.8rem 0;
    }
    
    /* ========== CARDS ========== */
    .card { 
        border-radius: 12px; 
        box-shadow: 0 4px 12px rgba(0,0,0,0.08); 
        margin-bottom: 24px;
        border: 1px solid #e9ecef;
    }
    .card-header {
        background-color: #f8f9fa;
        border-bottom: 1px solid #e9ecef;
        padding: 1rem 1.5rem;
        font-weight: 600;
    }
    
    /* ========== FORM ELEMENTS ========== */
    .form-control, .form-select { 
        border-radius: 8px; 
        padding: 10px 14px;
        border: 1px solid #ced4da;
        transition: all 0.2s;
    }
    .form-control:focus, .form-select:focus {
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);
    }
    .form-label {
        font-weight: 500;
        margin-bottom: 6px;
        color: #495057;
    }
    
    /* ========== BUTTONS ========== */
    .btn-primary { 
        background-color: #0d6efd; 
        border: none; 
        padding: 10px 24px; 
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.2s;
    }
    .btn-primary:hover {
        background-color: #0b5ed7;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(13, 110, 253, 0.2);
    }
    .btn-outline-secondary {
        border: 2px solid #6c757d;
        font-weight: 500;
    }
    .btn-outline-warning {
        border: 2px solid #ffc107;
        font-weight: 500;
    }
    .btn-lg {
        padding: 12px 28px;
        font-size: 1.1rem;
    }
    
    /* ========== ACTION BUTTONS (Edit/Delete) ========== */
    .btn-group-sm > .btn {
        padding: 0.3rem 0.6rem;
        font-size: 0.85rem;
        border-radius: 6px;
    }
    .btn-outline-primary {
        border-color: #0d6efd;
        color: #0d6efd;
    }
    .btn-outline-primary:hover {
        background-color: #0d6efd;
        color: white;
        transform: translateY(-1px);
        box-shadow: 0 2px 5px rgba(13, 110, 253, 0.2);
    }
    .btn-outline-danger {
        border-color: #dc3545;
        color: #dc3545;
    }
    .btn-outline-danger:hover {
        background-color: #dc3545;
        color: white;
        transform: translateY(-1px);
        box-shadow: 0 2px 5px rgba(220, 53, 69, 0.2);
    }
    
    /* ========== STATUS BADGES ========== */
    .status-badge { 
        padding: 5px 12px; 
        border-radius: 20px; 
        font-size: 0.8rem;
        font-weight: 600;
        display: inline-block;
        min-width: 80px;
        text-align: center;
    }
    .status-draft { 
        background-color: #fff3cd; 
        color: #856404;
        border: 1px solid #ffeaa7;
    }
    .status-approved { 
        background-color: #d1e7dd; 
        color: #0f5132;
        border: 1px solid #badbcc;
    }
    .status-pending { 
        background-color: #cff4fc; 
        color: #055160;
        border: 1px solid #b6effb;
    }
    
    /* ========== TABLE STYLING ========== */
    .table {
        margin-bottom: 0;
    }
    .table thead th {
        background-color: #f8f9fa;
        border-bottom: 2px solid #dee2e6;
        font-weight: 600;
        color: #495057;
        padding: 1rem;
        white-space: nowrap;
    }
    .table tbody td {
        padding: 1rem;
        vertical-align: middle;
        border-top: 1px solid #e9ecef;
    }
    .table-hover tbody tr:hover {
        background-color: rgba(0, 0, 0, 0.02);
    }
    .table-warning {
        background-color: rgba(255, 193, 7, 0.1) !important;
        border-left: 4px solid #ffc107;
    }
    
    /* ========== TABS ========== */
    .nav-tabs {
        border-bottom: 2px solid #dee2e6;
        margin-bottom: 0;
    }
    .nav-tabs .nav-link {
        border: none;
        color: #6c757d;
        font-weight: 500;
        padding: 0.8rem 1.5rem;
        margin-bottom: -2px;
        border-radius: 8px 8px 0 0;
    }
    .nav-tabs .nav-link:hover {
        color: #0d6efd;
        background-color: #f8f9fa;
    }
    .nav-tabs .nav-link.active { 
        background-color: #fff; 
        border: 2px solid #dee2e6;
        border-bottom-color: #fff;
        color: #0d6efd;
        font-weight: 600;
    }
    .tab-content { 
        border: 2px solid #dee2e6; 
        border-top: none; 
        padding: 24px;
        background-color: white;
        border-radius: 0 0 8px 8px;
    }
    
    /* ========== DASHBOARD CARDS ========== */
    .dashboard-card {
        border-radius: 10px;
        color: white;
        padding: 1.5rem;
        height: 100%;
        transition: transform 0.3s;
    }
    .dashboard-card:hover {
        transform: translateY(-5px);
    }
    .dashboard-card i {
        font-size: 2rem;
        margin-bottom: 10px;
        opacity: 0.9;
    }
    .dashboard-card h5 {
        font-size: 0.9rem;
        opacity: 0.9;
        margin-bottom: 5px;
    }
    .dashboard-card h2 {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0;
    }
    
    /* ========== BADGES ========== */
    .badge {
        padding: 0.35em 0.65em;
        font-weight: 500;
        border-radius: 10px;
    }
    .bg-success-light {
        background-color: rgba(25, 135, 84, 0.1);
        color: #198754;
    }
    .bg-secondary-light {
        background-color: rgba(108, 117, 125, 0.1);
        color: #6c757d;
    }
    
    /* ========== TOAST NOTIFICATIONS ========== */
    .toast {
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        border: none;
    }
    .toast-header {
        border-radius: 8px 8px 0 0;
        font-weight: 600;
    }
    
    /* ========== RESPONSIVE ========== */
    @media (max-width: 768px) {
        .container {
            padding-left: 15px;
            padding-right: 15px;
        }
        .btn-lg {
            padding: 10px 20px;
            font-size: 1rem;
        }
        .nav-tabs .nav-link {
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
        }
        .table-responsive {
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
    }
    
    /* ========== MISC ========== */
    .text-muted-light {
        color: #adb5bd;
    }
    .cursor-pointer {
        cursor: pointer;
    }
    .shadow-sm {
        box-shadow: 0 2px 8px rgba(0,0,0,0.06) !important;
    }
</style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-airplane-fill me-2"></i>Group Seat Platform
            </a>
            <div class="navbar-nav">
                <a class="nav-link active" href="#"><i class="bi bi-house-door me-1"></i>Dashboard</a>
                <a class="nav-link" href="#acquireForm"><i class="bi bi-plus-circle me-1"></i>Acquire Seats</a>
                <button class="btn btn-outline-primary ms-3" onclick="showLogin()">Login</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        <!-- Dashboard Stats -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <h5><i class="bi bi-people-fill"></i> Total Seats</h5>
                        <h2 id="totalSeats">0</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <h5><i class="bi bi-cash-stack"></i> Revenue</h5>
                        <h2 id="totalRevenue">0.00</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-info text-white">
                    <div class="card-body">
                        <h5><i class="bi bi-file-text"></i> Acquisitions</h5>
                        <h2 id="totalAcquisitions">0</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-warning text-white">
                    <div class="card-body">
                        <h5><i class="bi bi-clock-history"></i> Pending</h5>
                        <h2 id="pendingItems">0</h2>
                    </div>
                </div>
            </div>
        </div>

        <!-- Acquire Seats Form -->
        <div class="card" id="acquireForm">
            <div class="card-header bg-light">
                <h4 class="mb-0"><i class="bi bi-plus-circle me-2"></i>Acquire Seats Form</h4>
            </div>
            <div class="card-body">
                <ul class="nav nav-tabs" id="formTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic" type="button">Basic Info</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="financial-tab" data-bs-toggle="tab" data-bs-target="#financial" type="button">Financial</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="emd-tab" data-bs-toggle="tab" data-bs-target="#emd" type="button">EMD Details</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="ticketing-tab" data-bs-toggle="tab" data-bs-target="#ticketing" type="button">Ticketing</button>
                    </li>
                </ul>
                
                <div class="tab-content" id="formTabsContent">
                    <!-- Basic Info Tab -->
                    <div class="tab-pane fade show active" id="basic" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">SR Number</label>
                                    <input type="text" class="form-control" id="srNumber" readonly>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Request Date</label>
                                    <input type="date" class="form-control" id="requestDate">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Investment Type</label>
                                    <select class="form-select" id="investmentType">
                                        <option value="Company Investment">Company Investment</option>
                                        <option value="Agent Investment">Agent Investment</option>
                                        <option value="block_space">Block Space</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">IATA</label>
				    <select class="form-select" id="IATA">	
                                    	<option value="QFC">QFC</option>
					<option value="FCT">FCT</option>
					<option value="AG">AG</option>
				</select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Branch</label>
				    <select class="form-select" id="Branch">	
                                    	<option value="HO">HO</option>
					<option value="LHE">LHE</option>
					<option value="SKT">SKT</option>
				    </select>		
                                    </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Airline PNR</label>
                                    <input type="text" class="form-control" id="airlinePnr" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">GDS PNR</label>
                                    <input type="text" class="form-control" id="gdsPnr">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Segment</label>
                                    <select class="form-select" id="segment">
                                        <option value="Umrah">Umrah</option>
					<option value="Employment">Employment</option>
					<option value="Hajj">Hajj</option>
                                        <option value="Tours">Tours</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Airline</label>
                                    <select class="form-select" id="Aieline">
                                        <option value="SV">SV</option>
					<option value="PA">PA</option>
					<option value="PF">PF</option>
                                        <option value="9P">9P</option>
					<option value="J9">J9</option>
					<option value="PK">PK</option>
					<option value="EK">EK</option>
					<option value="F3">F3</option>
				</select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">No. of Seats</label>
                                    <input type="number" class="form-control" id="noOfSeats" required min="1">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Outbound Date</label>
                                    <input type="date" class="form-control" id="outboundDate">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Inbound Date</label>
                                    <input type="date" class="form-control" id="inboundDate">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Sector</label>
                                    <input type="text" class="form-control" id="sector" placeholder="e.g., JFK-LAX">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Tab -->
                    <div class="tab-pane fade" id="financial" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Fare</label>
                                    <input type="number" class="form-control" id="fare" step="0.01" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Taxes</label>
                                    <input type="number" class="form-control" id="taxes" step="0.01" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Payable Amount</label>
                                    <input type="number" class="form-control" id="payableAmount" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">PNR Amount</label>
                                    <input type="number" class="form-control" id="pnrAmount" readonly>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Issuance Date</label>
                                    <input type="date" class="form-control" id="issuanceDate">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Time Limit</label>
                                    <input type="date" class="form-control" id="timeLimit" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Payment %</label>
                                    <input type="number" class="form-control" id="paymentPercentage" value="100" min="0" max="100">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- EMD Details Tab -->
                    <div class="tab-pane fade" id="emd" role="tabpanel">
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5>1st EMD Details</h5>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">EMD Number</label>
                                    <input type="text" class="form-control" id="emd1Number">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">EMD Amount</label>
                                    <input type="number" class="form-control" id="emd1Amount" step="0.01">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Status</label>
                                    <select class="form-select" id="emd1Status">
                                        <option value="">Select</option>
                                        <option value="paid">Paid</option>
                                        <option value="pending">Pending</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Time Limit</label>
                                    <input type="date" class="form-control" id="emd1TimeLimit">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Issuance Date</label>
                                    <input type="date" class="form-control" id="emd1IssuanceDate">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Payment %</label>
                                    <input type="number" class="form-control" id="emd1PaymentPercent" min="0" max="100">
                                </div>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-12">
                                <h5>2nd EMD Details</h5>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">EMD Number</label>
                                    <input type="text" class="form-control" id="emd2Number">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">EMD Amount</label>
                                    <input type="number" class="form-control" id="emd2Amount" step="0.01">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Time Limit</label>
                                    <input type="date" class="form-control" id="emd2TimeLimit">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <h5>3rd EMD Details</h5>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">EMD Number</label>
                                    <input type="text" class="form-control" id="emd3Number">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">EMD Amount</label>
                                    <input type="number" class="form-control" id="emd3Amount" step="0.01">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Time Limit</label>
                                    <input type="date" class="form-control" id="emd3TimeLimit">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ticketing Tab -->
                    <div class="tab-pane fade" id="ticketing" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">EMD Refund Date</label>
                                    <input type="date" class="form-control" id="emdRefundDate">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ticketing Status</label>
                                    <select class="form-select" id="ticketingStatus">
                                        <option value="pending">Pending</option>
                                        <option value="partial">Partial</option>
                                        <option value="completed">Completed</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">No. of Tickets Issued</label>
                                    <input type="number" class="form-control" id="ticketsIssued" min="0">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Balance Tickets</label>
                                    <input type="number" class="form-control" id="balanceTickets" readonly>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Last Ticket Date</label>
                                    <input type="date" class="form-control" id="lastTicketDate">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Status</label>
                                    <select class="form-select" id="overallStatus">
                                        <option value="draft">Draft</option>
                                        <option value="submitted">Submitted</option>
                                        <option value="approved">Approved</option>
                                        <option value="rejected">Rejected</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Notes</label>
                            <textarea class="form-control" id="notes" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Submit Buttons -->
		<div class="mt-4">
    			<button type="button" class="btn btn-primary btn-lg" onclick="saveAcquisition()">
        			<i class="bi bi-save me-2"></i>Save Acquisition
    		</button>
    		<button type="button" class="btn btn-outline-secondary ms-2" onclick="resetForm()">
        		<i class="bi bi-arrow-clockwise me-2"></i>Reset Form
    		</button>
    		<button type="button" class="btn btn-outline-warning ms-2" onclick="cancelEdit()" id="cancelEditBtn" style="display: none;">
        		<i class="bi bi-x-circle me-2"></i>Cancel Edit
    		</button>
		<button type="button" class="btn btn-outline-warning ms-2" onclick="cancelEdit()" id="cancelEditBtn" style="display: none;">
        		<i class="bi bi-x-circle me-2"></i>Cancel Edit
   	 	</button>
		</div>
            </div>
        </div>

        <!-- Recent Acquisitions Table -->
<div class="card mt-4">
    <div class="card-header bg-light d-flex justify-content-between align-items-center">
        <h4 class="mb-0"><i class="bi bi-table me-2"></i>Recent Acquisitions</h4>
        <span class="badge bg-primary" id="tableCount">0 records</span>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th width="15%">SR #</th>
                        <th width="15%">Airline PNR</th>
                        <th width="10%">Seats</th>
                        <th width="12%">Fare</th>
                        <th width="12%">Status</th>
                        <th width="15%">Date</th>
                        <th width="21%">Actions</th>
                    </tr>
                </thead>
                <tbody id="acquisitionsTable">
                    <!-- Data will be loaded here by JavaScript -->
                    <tr>
                        <td colspan="7" class="text-center py-5">
                            <div class="text-muted">
                                <i class="bi bi-inbox display-6"></i>
                                <p class="mt-2">No acquisitions yet</p>
                                <small>Save your first acquisition above</small>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

    <!-- Toast Notifications -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="successToast" class="toast" role="alert">
            <div class="toast-header bg-success text-white">
                <strong class="me-auto">Success!</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="successMessage"></div>
        </div>
        <div id="errorToast" class="toast" role="alert">
            <div class="toast-header bg-danger text-white">
                <strong class="me-auto">Error!</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="errorMessage"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
</body>
</html>
